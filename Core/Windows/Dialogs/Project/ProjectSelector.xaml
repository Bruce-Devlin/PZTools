<Window x:Class="PZTools.Core.Windows.Dialogs.Project.ProjectSelector"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="PZTools - Select Project"
        Height="340"
        Width="480"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="{x:Null}"
        Foreground="{StaticResource Brush.TextPrimary}" WindowStyle="None" AllowsTransparency="True"
        Icon="/Core/Assets/Icons/PZToolsIcon.png">

    <Grid Margin="18">
        <Border Style="{StaticResource Card}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="10"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <StackPanel Grid.Row="0" Margin="0,0,0,12">
                    <TextBlock Text="Select a Project" Style="{StaticResource Text.Title}"/>
                    <Grid>
                        <TextBlock x:Name="ProjectFolderTxt"
                               Text="Projects folder:"
                               Foreground="{StaticResource Brush.TextInfo}"
                               FontSize="10"/>
                        <Button x:Name="OpenProjectFolderBtn"
                                Click="OpenProjectFolderBtn_Click" Background="Black" BorderBrush="{x:Null}" Foreground="{x:Null}" Cursor="Hand" Panel.ZIndex="10" Opacity="0.01"/>
                    </Grid>

                </StackPanel>

                <!-- TreeView -->
                <Border Grid.Row="1"
                        Background="{StaticResource Brush.BgApp}"
                        BorderBrush="{StaticResource Brush.Border}"
                        BorderThickness="1"
                        CornerRadius="10"
                        Padding="8">

                    <TreeView x:Name="ProjectsTreeView"
                              Style="{StaticResource ModernTreeView}">
                        <TreeView.Resources>
                            <Style TargetType="TreeViewItem" BasedOn="{StaticResource ModernTreeViewItem}"/>
                        </TreeView.Resources>

                        <TreeView.ItemTemplate>
                            <HierarchicalDataTemplate ItemsSource="{Binding VersionWrappers}">
                                <TextBlock Text="{Binding Name}" FontWeight="SemiBold"/>

                                <HierarchicalDataTemplate.ItemTemplate>
                                    <HierarchicalDataTemplate ItemsSource="{Binding Builds}">
                                        <TextBlock Text="{Binding Label}"
                                                   Foreground="{StaticResource Brush.TextInfo}"
                                                   Margin="10,2,0,2"/>

                                        <HierarchicalDataTemplate.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding Build, StringFormat='b{0}'}"
                                                           Margin="20,2,0,2"
                                                           Foreground="{StaticResource Brush.TextWarn}"/>
                                            </DataTemplate>
                                        </HierarchicalDataTemplate.ItemTemplate>
                                    </HierarchicalDataTemplate>
                                </HierarchicalDataTemplate.ItemTemplate>
                            </HierarchicalDataTemplate>
                        </TreeView.ItemTemplate>
                    </TreeView>
                </Border>

                <Border Grid.Row="2"
                        Background="{StaticResource Brush.Border}"
                        Height="1"
                        VerticalAlignment="Top" Margin="0,8,0,0"/>

                <!-- Buttons -->
                <StackPanel Grid.Row="3"
                            Orientation="Horizontal"
                            HorizontalAlignment="Right"
                            Margin="0,12,0,0">
                    <Button Style="{StaticResource ModernButton}"
                            Content="New Project"
                            Width="100"
                            Margin="0,0,8,0"
                            Click="NewProjectButton_Click"/>

                    <Button Style="{StaticResource PrimaryButton}"
                            Content="OK"
                            Width="100"
                            Margin="0,0,8,0"
                            Click="OkButton_Click"/>

                    <Border Grid.Row="2"
                        Background="{StaticResource Brush.Border}"
                        Height="34"
                        VerticalAlignment="Top" Margin="0,0,8,0" Width="3"/>

                    <Button Style="{StaticResource ModernButton}"
                            Content="Close PZTools"
                            Width="110"
                            Click="CancelButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
