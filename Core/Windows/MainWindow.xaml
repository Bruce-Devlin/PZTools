<Window x:Class="PZTools.Core.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PZTools"
        xmlns:view="clr-namespace:PZTools.Core.Models.View"
        xmlns:models="clr-namespace:PZTools.Core.Models"
        xmlns:avalonedit="http://icsharpcode.net/sharpdevelop/avalonedit"
        mc:Ignorable="d"
        Title="PZ Tools"
        Height="565"
        Width="895"
        WindowState="Maximized"
        Loaded="Window_Loaded"
        MinWidth="700"
        MinHeight="420"
        Background="#0F1117">

    <!-- ================= THEME ================= -->
    <Window.Resources>

        <!-- Colors -->
        <SolidColorBrush x:Key="BgMain" Color="#0F1117"/>
        <SolidColorBrush x:Key="BgPanel" Color="#161A23"/>
        <SolidColorBrush x:Key="BgPanelAlt" Color="#1B2030"/>
        <SolidColorBrush x:Key="BgEditor" Color="#0D1117"/>
        <SolidColorBrush x:Key="BorderSoft" Color="#2A2F3A"/>
        <SolidColorBrush x:Key="TextPrimary" Color="#E6EDF3"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#9AA4B2"/>
        <SolidColorBrush x:Key="Accent" Color="#4FC1FF"/>

        <!-- MenuItem -->
        <Style TargetType="MenuItem" x:Key="MenuItemWithSeparatorStyle">
            <Setter Property="Header" Value="{Binding Header}" />
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Command" Value="{Binding Command}" />
            <Setter Property="ItemsSource" Value="{Binding Children}" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsSeparator}" Value="True">
                    <Setter Property="Header" Value="{x:Null}" />
                    <Setter Property="FontFamily" Value="Segoe UI"/>
                    <Setter Property="Command" Value="{x:Null}" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="MenuItem">
                                <Separator />
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <!-- TextBox -->
        <Style TargetType="TextBox">
            <Setter Property="Background" Value="#10151E"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderSoft}"/>
            <Setter Property="Padding" Value="6"/>
        </Style>

        <!-- TreeView -->
        <Style TargetType="TreeView">
            <Setter Property="Background" Value="{StaticResource BgPanel}"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>

    </Window.Resources>

    <DockPanel Background="{StaticResource BgMain}">

        <!-- Menu -->
        <Menu DockPanel.Dock="Top" ItemsSource="{Binding Menus}" Height="20">
            <Menu.ItemContainerStyle>
                <Style TargetType="MenuItem" BasedOn="{StaticResource MenuItemWithSeparatorStyle}" />
            </Menu.ItemContainerStyle>
        </Menu>

        <!-- Status bar -->
        <StatusBar DockPanel.Dock="Bottom"
                   Background="#0C1016"
                   BorderThickness="0">
            <TextBlock x:Name="StatusBarText"
                       Foreground="{StaticResource TextSecondary}"
                       Text="Ready"/>
        </StatusBar>

        <!-- Console panel -->
        <Border DockPanel.Dock="Bottom"
                Height="160"
                Background="{StaticResource BgPanel}"
                BorderBrush="{StaticResource BorderSoft}"
                BorderThickness="1">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="28"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <DockPanel Background="{StaticResource BgPanelAlt}">
                    <TextBlock Text="Console"
                               Foreground="{StaticResource TextSecondary}"
                               VerticalAlignment="Center"
                               Margin="10,0"/>
                </DockPanel>

                <ScrollViewer x:Name="ConsoleScroll" Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <TextBox x:Name="ConsoleOutput"
                             Background="{StaticResource BgEditor}"
                             Foreground="White"
                             FontFamily="Consolas"
                             FontSize="13"
                             BorderThickness="0"
                             IsReadOnly="True"
                             TextWrapping="Wrap"/>
                </ScrollViewer>
            </Grid>
        </Border>

        <!-- Splitter -->
        <GridSplitter DockPanel.Dock="Bottom"
                      Height="4"
                      Background="#1E2430"
                      HorizontalAlignment="Stretch"/>

        <!-- Main layout -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="320"/>
            </Grid.ColumnDefinitions>

            <!-- Project Explorer -->
            <Border Grid.Column="0"
                    Background="{StaticResource BgPanel}"
                    BorderBrush="{StaticResource BorderSoft}"
                    BorderThickness="0,0,1,0">

                <TreeView x:Name="ModsTreeView" Foreground="White">

                    <TreeView.Resources>

                        <HierarchicalDataTemplate DataType="{x:Type models:ProjectFileNode}"
                                                  ItemsSource="{Binding Children}">
                            <TextBlock Text="{Binding Name}"
                                       Foreground="{StaticResource TextPrimary}" />
                        </HierarchicalDataTemplate>

                        <HierarchicalDataTemplate DataType="{x:Type models:ModTarget}"
                                                  ItemsSource="{Binding FileTree.Children}">
                            <TextBlock Text="{Binding Build, StringFormat=Build {0}}"
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource Accent}" />
                        </HierarchicalDataTemplate>

                    </TreeView.Resources>

                </TreeView>
            </Border>

            <!-- Left splitter -->
            <GridSplitter Grid.Column="0"
                          Width="4"
                          Background="#1E2430"
                          HorizontalAlignment="Right"/>

            <!-- Editor -->
            <Border Grid.Column="1"
                    Background="{StaticResource BgEditor}"
                    BorderBrush="{StaticResource BorderSoft}"
                    BorderThickness="1,0,1,0">

                <avalonedit:TextEditor x:Name="LuaEditor"
                                       ShowLineNumbers="True"
                                       FontFamily="Consolas"
                                       FontSize="14"
                                       IsReadOnly="True"
                                       Background="{StaticResource BgEditor}"
                                       Foreground="{StaticResource TextPrimary}"/>

            </Border>

            <!-- Right splitter -->
            <GridSplitter Grid.Column="1"
                          Width="4"
                          Background="#1E2430"
                          HorizontalAlignment="Right"/>

            <!-- Properties -->
            <Border Grid.Column="2"
                    Background="{StaticResource BgPanel}"
                    BorderBrush="{StaticResource BorderSoft}"
                    BorderThickness="1,0,0,0"
                    Padding="14">
                <GroupBox Header="File Properties" Foreground="White">
                    <StackPanel>
                        <TextBlock Text="Name:" Foreground="White"/>
                        <TextBox x:Name="txtPropName" IsReadOnly="True" Margin="0,0,0,8"/>

                        <TextBlock Text="Full Path:" Foreground="White"/>
                        <TextBox x:Name="txtPropPath" IsReadOnly="True" Margin="0,0,0,8"/>

                        <TextBlock Text="Size:" Foreground="White"/>
                        <TextBox x:Name="txtPropSize" IsReadOnly="True" Margin="0,0,0,8"/>

                        <TextBlock Text="Encoding:" Foreground="White"/>
                        <TextBox x:Name="txtPropEncoding" IsReadOnly="True"/>

                    </StackPanel>
                </GroupBox>


            </Border>

        </Grid>
    </DockPanel>
</Window>
